(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(a,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return l(7597)}])},7597:function(a,t,l){"use strict";l.r(t),l.d(t,{default:function(){return w}});var e=l(5893),n=l(913),r=l(3841),s=l(723),c=l(5819),u=l(5449),i=l(3321),o=l(7536);let x=function(a){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,l=Math.pow(10,t);return Math.round(a*l)/l},m=function(a){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return void 0===a?"":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:t,minimumFractionDigits:t}).format(a)};var d=l(6154),h=l(7294);let C=d.Z.create({baseURL:"http://localhost:5000"});var _=l(4182),b=l(8975);let f={TAX_RATES:"tax-calculator/tax-year/%(assessmentYear)s"},T=a=>_.E.fetchQuery(["taxBrackets",a],async()=>{let t=await C.get((0,b.sprintf)(f.TAX_RATES,{assessmentYear:a}));return t.data.tax_brackets}),v=async(a,t)=>{let l=0,e=await T(t),n=[];for(let t of e){if(a<t.min)break;let e=Math.min(a,t.max||1/0),r=t.min,s=e-r,c=t.rate*s;l+=c,n.push({...t,tax:x(c,2)})}return{totalTax:x(l,2),taxBands:n}},j=a=>{if(a<=0)return"Annual income must be greater than 0"};var N=l(8780),y=l.n(N);let S=a=>a.taxBands?(0,e.jsxs)("div",{className:y().taxCalculationContainer,children:[(0,e.jsxs)("div",{className:y().taxCalculationSummary,children:[(0,e.jsxs)("div",{className:y().taxCalculationSummaryTitle,children:["Total Tax (for ",m(a.annualIncome),")"]}),(0,e.jsx)("div",{className:y().taxCalculationSummaryValue,children:m(a.totalTax)})]}),(0,e.jsxs)("table",{className:y().taxCalculationTable,children:[(0,e.jsx)("tbody",{children:a.taxBands.map(a=>(0,e.jsxs)("tr",{children:[(0,e.jsxs)("td",{children:[(0,e.jsxs)("div",{children:[m(a.min||0)," - ",a.max?m(a.max):"any"]}),(0,e.jsx)("div",{className:"text-hint text-small",children:"".concat((100*a.rate).toFixed(1),"%")})]}),(0,e.jsx)("td",{className:y().taxNumber,children:m(a.tax)})]},a.min))}),(0,e.jsxs)("tr",{className:y().tableFooter,children:[(0,e.jsx)("td",{children:"Total"}),(0,e.jsx)("td",{className:y().taxNumber,children:m(a.totalTax)})]})]})]}):null;var A=l(9178),p=l.n(A);let g=[2022,2021,2020,2019],F=()=>{var a;let{register:t,handleSubmit:l,getValues:x,formState:{errors:m}}=(0,o.cI)(),{run:d,data:C,isLoading:_,hasError:b}=function(a){let[t,l]=(0,h.useState)(!1),[e,n]=(0,h.useState)(!1),[r,s]=(0,h.useState)();return{run:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return l(!0),n(!1),s(void 0),a(...e).then(a=>(s(a),a)).catch(a=>{n(!0)}).finally(()=>{l(!1)})},isLoading:t,hasError:e,data:r}}(v),f=0===Object.keys(m).length,T=async a=>await d(a.annualIncome,a.assessmentYear);return(0,e.jsx)("div",{className:p().taxCalculatorContainer,children:(0,e.jsxs)("div",{className:p().taxCalculatorContent,children:[(0,e.jsx)("h1",{children:"Tax Calculator"}),(0,e.jsxs)("form",{onSubmit:l(T),className:p().taxCalculatorForm,children:[(0,e.jsxs)(n.Z,{fullWidth:!0,children:[(0,e.jsx)(r.Z,{htmlFor:"assessmentYear",children:"Assessment Year"}),(0,e.jsx)(s.Z,{"aria-label":"Assessment Year",label:"Assessment Year",id:"assessmentYear",defaultValue:2022,...t("assessmentYear",{valueAsNumber:!0}),children:g.map(a=>(0,e.jsx)(c.Z,{value:a,children:a},a))})]}),(0,e.jsx)(u.Z,{label:"Annual Income",fullWidth:!0,...t("annualIncome",{valueAsNumber:!0,validate:j}),error:!!m.annualIncome,helperText:null===(a=m.annualIncome)||void 0===a?void 0:a.message}),(0,e.jsx)(i.Z,{type:"submit",variant:"contained",disabled:_||!f,children:"Calculate"})]}),b&&(0,e.jsx)("div",{className:p().taxCalculatorError,children:"An Error occurred!"}),(0,e.jsx)(S,{annualIncome:x("annualIncome"),taxBands:null==C?void 0:C.taxBands,totalTax:null==C?void 0:C.totalTax})]})})};function w(){return(0,e.jsx)(F,{})}},8780:function(a){a.exports={taxCalculationContainer:"taxCalculatorTable_taxCalculationContainer__zSZU0",heightAnimation:"taxCalculatorTable_heightAnimation___cRvi",taxCalculationSummary:"taxCalculatorTable_taxCalculationSummary__KcxiZ",taxCalculationSummaryTitle:"taxCalculatorTable_taxCalculationSummaryTitle__k125i",taxCalculationSummaryValue:"taxCalculatorTable_taxCalculationSummaryValue__Gt621",taxCalculationTable:"taxCalculatorTable_taxCalculationTable__g51ys",tableFooter:"taxCalculatorTable_tableFooter__lVklW",taxNumber:"taxCalculatorTable_taxNumber__TKW9Y"}},9178:function(a){a.exports={taxCalculatorContainer:"taxCalculator_taxCalculatorContainer__qF1Ci",taxCalculatorContent:"taxCalculator_taxCalculatorContent__nex9N",taxCalculatorForm:"taxCalculator_taxCalculatorForm__NG1ud"}}},function(a){a.O(0,[627,774,888,179],function(){return a(a.s=8312)}),_N_E=a.O()}]);
//# sourceMappingURL=index-bb19bd52113e6d30.js.map